# CPU的功能和结构

CPU运行时，各个硬件的运作。

# 指令执行过程

## 指令周期

## 指令执行方案

### 单指令周期

### 多指令周期

### 流水线方案

# 数据通路的功能和基本结构

数据在功能部件之间传送的路径称为数据通路

## 功能

​	实现CPU内部的运算器与寄存器以及寄存器之间的数据交换

## 基本结构

### CPU内部单总线

### CPU内部多总线

​	比单总线效率高

### 专用数据通路

​	避免使用共享的数据线，效率最高，硬件成本最高

## 数据传送过程

### 寄存器之间数据传送

>内部总线叫Bus

### 主存与CPU之间数据传送

### 执行算术或逻辑运算

# 控制器的功能和工作原理

## 控制器的结构和功能

与运算器、I/O设备、内存的交互

### 硬布线控制器

根据指令的要求、当前的时序及外部和内部的状态情况，按时间顺序发送一系列微操作控制信号。由复杂的组合逻辑门电路和触发器构成。

#### 输入信号

​	指令译码器的译码信息、时序系统的机器周期信号和节拍信号、标志寄存器的标志（根据指令的结果产生不同的信号）。

#### 硬布线控制器的时序系统和微操作

不同指令的微操作不同，信号也不同。如何控制这些信号的发出时间？

##### 同步控制方式

​		统一的时钟，所有控制信号按这个时钟发出 ，以最长的微操作序列和最繁琐的微操作作为基准。

##### 异步控制方式

​		各部件按自己的速度工作。用请求/应答来合作。

##### 联合控制方式

​		大部分同步，小部分异步。

#### 硬布线控制单元设计步骤

1. 将所有指令会执行的微操作按执行顺序取**并集**。并列出每条指令的条件（操作码，机器周期，节拍，脉冲，机器状态）。

2. 实时的微操作控制信号是一系列的条件取逻辑与

   微操作信号=机器周期^节拍^脉冲^操作码^机器状态条件

   >操作码由译码器给出
   >
   >机器状态条件由PSW给出，还有寻址标记位

3. 画出对应的逻辑图，用逻辑门实现电路

   输入是：机器周期、节拍、脉冲、操作码、机器状态条件

   输出是：微操作信号

### 微程序控制器

#### 指令的结构和存储

​	一条机器指令对应一个微程序，微程序存储在控制存储器中。

​	一个微程序里面包含多个微指令

​	一个微指令对应一个或多个微操作

​	一个微操作对应一个微命令

>微命令就是发出控制信号

​	所以，一条机器指令被分解成了控制信号的序列。

#### 微指令

​	是若干微命令的集合。存放微指令的控制存储器的单元地址称为微地址。

##### 微指令的字段

​	操作控制字段（微操作码字段）

​		用于产生某一步操作所需的各种操作控制信号。

​	顺序控制字段

​		用于产生下一条要执行的微指令地址

##### 主存储器与控制存储器

​	主存储器用于存放程序和数据，在CPU外部，用RAM实现。

​	控制存储器（CM）用于存放微程序，在CPU内部，用ROM实现。

#### 微程序控制器组成和工作过程



​	

# 问题

## MAR、MDR是在存储器还是在CPU中？

 
# 进程

## 进程与线程

## 进程通信





## 进程的状态

### 就绪（Ready）

就绪是指可以执行但是没分到时间片

### 执行（Running）

执行可以转为阻塞（需要I/O），和就绪（时间片用完）

### 阻塞（Block）

阻塞可以转为就绪

### 创建

创建后放进就绪队列

### 终止

# 经典同步问题

## 生产者消费者问题

## 吃水果问题

## 读者写者问题

## 哲学家进餐

哲学家：

​	每次只允许一个哲学家进餐

## 抽烟者问题

# 死锁

## 定义

多个进程竞争资源造成的互相等待

## 产生原因

不可剥夺的资源

进程推进顺序非法

信号量使用不当（非主要）

## 必要条件

### 互斥条件

​	有互斥资源

### 不剥夺条件

​	资源只能主动释放，不能被强制剥夺

### 请求和保持条件

​	自己有一个资源，但是不释放，等待另一个资源

### 循环等待条件

​	有循环等待又不一定有死锁的原因：同类资源数大于1

## 死锁预防

### 破坏互斥条件

可行性不强

### 破坏不剥夺条件

请求不到新资源时，暂时释放自己的资源，可能造成“饥饿”

### 破坏请求和保持条件

运行前先申请所有资源，可能造成“饥饿”

### 破坏循环等待条件

资源编号，只能按规定的顺序申请资源

## 死锁避免

### 系统安全状态

系统每次资源分配，先判断安全性

计算安全性

​	总共资源数为n

​	每个进程当前都有一定的资源

​	如果给某个进程剩余的资源它能完成，就回收这个进程的资源，接下来再找另一个进程回收，最后能全部回收就是安全的进程执行序列。

### 银行家算法

进程申请资源时

需要数=最大需求量-已分配量

请求数$\le$需要数
​	请求数$\le$可用数
​		试探分配 用安全性算法检查安全性
​		不安全则试探分配作废，进程等待
​	否则 进程等待
否则 出错了

## 死锁检测和解除

### 死锁定理

简化资源分配图找出死锁

1. 找到进程，他申请的资源数小于等于系统中存在的资源数
2. 删除这个进程所有的连线
3. 能够消除所有边就是可完全简化的

### 死锁解除

资源剥夺：挂起某些死锁进程，抢占它的资源

撤销进程法：强制撤销进程

进程回退法：进程在时间上回退







​	

